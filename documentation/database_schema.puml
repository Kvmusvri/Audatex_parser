@startuml database_schema
!define TABLE(name,desc) class name as "desc" << (T,#FFAAAA) >>
!define PK(x) <b>x</b>
!define FK(x) <i>x</i>

TABLE(parser_car_detail, parser_car_detail)
  PK(id) : INTEGER
  request_id : VARCHAR(50) NOT NULL
  vin : VARCHAR(50) NOT NULL
  group_zone : VARCHAR(50) NOT NULL
  code : VARCHAR(50) NOT NULL
  title : TEXT NOT NULL
  source_from : VARCHAR(50) NOT NULL
  created_date : DATE NOT NULL

TABLE(parser_car_detail_group_zone, parser_car_detail_group_zone)
  PK(id) : INTEGER
  request_id : VARCHAR(50) NOT NULL
  vin : VARCHAR(50) NOT NULL
  type : VARCHAR(50) NOT NULL
  title : TEXT NOT NULL
  source_from : VARCHAR(50) NOT NULL
  created_date : DATE NOT NULL

TABLE(parser_car_request_status, parser_car_request_status)
  PK(id) : INTEGER
  request_id : VARCHAR(50) NOT NULL
  vin : VARCHAR(50) NOT NULL
  vin_status : VARCHAR(50) NOT NULL
  comment : VARCHAR(50) NOT NULL
  started_at : DATETIME
  completed_at : DATETIME
  created_date : DATE NOT NULL

TABLE(parser_car_options, parser_car_options)
  PK(id) : INTEGER
  request_id : VARCHAR(50) NOT NULL
  vin : VARCHAR(50) NOT NULL
  zone_name : VARCHAR(100) NOT NULL
  option_code : VARCHAR(50) NOT NULL
  option_title : TEXT NOT NULL
  is_selected : BOOLEAN NOT NULL
  source_from : VARCHAR(50) NOT NULL
  created_date : DATE NOT NULL

TABLE(parser_schedule_settings, parser_schedule_settings)
  PK(id) : INTEGER
  start_time : VARCHAR(5) NOT NULL
  end_time : VARCHAR(5) NOT NULL
  is_active : BOOLEAN NOT NULL
  created_at : DATETIME NOT NULL
  updated_at : DATETIME NOT NULL

TABLE(users, users)
  PK(id) : INTEGER
  username : VARCHAR(50) NOT NULL
  email : VARCHAR(100)
  hashed_password : VARCHAR(255) NOT NULL
  role : VARCHAR(20) NOT NULL
  is_active : BOOLEAN NOT NULL
  last_login : DATETIME
  failed_login_attempts : INTEGER NOT NULL
  locked_until : DATETIME
  created_at : DATETIME NOT NULL
  updated_at : DATETIME NOT NULL

TABLE(user_sessions, user_sessions)
  PK(id) : INTEGER
  FK(user_id) : INTEGER
  token_hash : VARCHAR(255) NOT NULL
  expires_at : DATETIME NOT NULL
  ip_address : VARCHAR(45)
  user_agent : TEXT
  created_at : DATETIME NOT NULL

user_sessions ||--o{ users : user_id -> id
@enduml