

<!DOCTYPE html>
<html class="writer-html5" lang="ru" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>core.parser.option_processor &mdash; –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Audotex Parser 1.0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=8b205fae" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=9ca2116e"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/translations.js?v=cd1d70c9"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="–ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å" href="../../../genindex.html" />
    <link rel="search" title="–ü–æ–∏—Å–∫" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Audotex Parser
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏" aria-label="–ü–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="–ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏">
              <p class="caption" role="heading"><span class="caption-text">–ú–æ–¥—É–ª–∏:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/auth.html">–ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (auth)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/database.html">–ú–æ–¥—É–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (database)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/database.html#id3">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/database.html#er">ER-–¥–∏–∞–≥—Ä–∞–º–º–∞</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/parser.html">–ú–æ–¥—É–ª—å –ø–∞—Ä—Å–µ—Ä–∞ (parser)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/queue.html">–ú–æ–¥—É–ª—å –æ—á–µ—Ä–µ–¥–∏ (queue)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/security.html">–ú–æ–¥—É–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (security)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="–ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Audotex Parser</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">–ö–æ–¥ –º–æ–¥—É–ª—è</a></li>
      <li class="breadcrumb-item active">core.parser.option_processor</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ core.parser.option_processor</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">–ú–æ–¥—É–ª—å –¥–ª—è —Å–±–æ—Ä–∞ –æ–ø—Ü–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã Audatex.</span>
<span class="sd">–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±–æ–±—â–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –±–µ–∑ –∂–µ—Å—Ç–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.common.by</span><span class="w"> </span><span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.support.ui</span><span class="w"> </span><span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.webdriver.support</span><span class="w"> </span><span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">selenium.common.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeoutException</span><span class="p">,</span> <span class="n">NoSuchElementException</span><span class="p">,</span> <span class="n">WebDriverException</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ç–∞–π–º–∞—É—Ç–æ–≤</span>
<span class="n">OPTION_TIMEOUT</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># –£–º–µ–Ω—å—à–∞–µ–º —Å 15 –¥–æ 5 —Å–µ–∫—É–Ω–¥</span>
<span class="n">FAST_POLL_INTERVAL</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">SECTION_TIMEOUT</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># –£–º–µ–Ω—å—à–∞–µ–º —Å 10 –¥–æ 5 —Å–µ–∫—É–Ω–¥</span>
<span class="n">OPTION_POLL_INTERVAL</span> <span class="o">=</span> <span class="mf">0.2</span>


<div class="viewcode-block" id="wait_for_element_stable">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.wait_for_element_stable">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">wait_for_element_stable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">selector</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">OPTION_TIMEOUT</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ñ–¥–µ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º polling&quot;&quot;&quot;</span>
    <span class="n">wait</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">poll_frequency</span><span class="o">=</span><span class="n">FAST_POLL_INTERVAL</span><span class="p">,</span>
                        <span class="n">ignored_exceptions</span><span class="o">=</span><span class="p">[</span><span class="n">NoSuchElementException</span><span class="p">,</span> <span class="n">TimeoutException</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">wait</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">selector</span><span class="p">)))</span></div>



<div class="viewcode-block" id="wait_for_element_clickable">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.wait_for_element_clickable">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">wait_for_element_clickable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">selector</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">OPTION_TIMEOUT</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ñ–¥–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫ –∫–ª–∏–∫—É&quot;&quot;&quot;</span>
    <span class="n">wait</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">poll_frequency</span><span class="o">=</span><span class="n">FAST_POLL_INTERVAL</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wait</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">element_to_be_clickable</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">selector</span><span class="p">)))</span></div>



<div class="viewcode-block" id="wait_for_content_loaded">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.wait_for_content_loaded">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">wait_for_content_loaded</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">SECTION_TIMEOUT</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ñ–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ–ø—Ü–∏–π&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">wait</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">poll_frequency</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                            <span class="n">ignored_exceptions</span><span class="o">=</span><span class="p">[</span><span class="n">NoSuchElementException</span><span class="p">])</span>
        
        <span class="n">content_element</span> <span class="o">=</span> <span class="n">wait</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;#model-options-section-content&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        
        <span class="c1"># –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏</span>
        
        <span class="k">return</span> <span class="n">content_element</span>
        
    <span class="k">except</span> <span class="n">TimeoutException</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;‚ùå –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span></div>



<div class="viewcode-block" id="navigate_to_options">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.navigate_to_options">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">navigate_to_options</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Ä–∞–∑–¥–µ–ª—É –æ–ø—Ü–∏–π —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä #navigation-adjustment&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üéØ –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–∞–∑–¥–µ–ª—É –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">current_url</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –¢–µ–∫—É—â–∏–π URL: </span><span class="si">{</span><span class="n">current_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="n">ready_state</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;return document.readyState&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: </span><span class="si">{</span><span class="n">ready_state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="n">iframe_selector</span> <span class="o">=</span> <span class="s2">&quot;#iframe_root</span><span class="se">\\</span><span class="s2">.task</span><span class="se">\\</span><span class="s2">.damageCapture</span><span class="se">\\</span><span class="s2">.inlineWebPad&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ò—â–µ–º iframe: </span><span class="si">{</span><span class="n">iframe_selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="n">iframe</span> <span class="o">=</span> <span class="n">wait_for_element_stable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">iframe_selector</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;‚úÖ Iframe –Ω–∞–π–¥–µ–Ω, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –≤ –Ω–µ–≥–æ&quot;</span><span class="p">)</span>
        
        <span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">iframe</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –≤ iframe&quot;</span><span class="p">)</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîç –ò—â–µ–º span —ç–ª–µ–º–µ–Ω—Ç navigation-adjustment –≤–Ω—É—Ç—Ä–∏ iframe...&quot;</span><span class="p">)</span>
        <span class="n">adjustment_span</span> <span class="o">=</span> <span class="n">wait_for_element_clickable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="s2">&quot;#navigation-adjustment&quot;</span><span class="p">)</span>
        <span class="n">adjustment_span</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;‚úÖ –ö–ª–∏–∫ –ø–æ span#navigation-adjustment –≤—ã–ø–æ–ª–Ω–µ–Ω&quot;</span><span class="p">)</span>
        
        <span class="n">options_container</span> <span class="o">=</span> <span class="n">wait_for_element_stable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="s2">&quot;#model-options-sections&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–ø—Ü–∏–π #model-options-sections –∑–∞–≥—Ä—É–∂–µ–Ω&quot;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="kc">True</span>
        
    <span class="k">except</span> <span class="p">(</span><span class="n">TimeoutException</span><span class="p">,</span> <span class="n">WebDriverException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –û—à–∏–±–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∫ –æ–ø—Ü–∏—è–º: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span></div>



<div class="viewcode-block" id="ensure_in_iframe">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.ensure_in_iframe">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">ensure_in_iframe</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –≤ –Ω—É–∂–Ω–æ–º iframe, –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;#model-options-sections&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">default_content</span><span class="p">()</span>
            <span class="n">iframe_selector</span> <span class="o">=</span> <span class="s2">&quot;#iframe_root</span><span class="se">\\</span><span class="s2">.task</span><span class="se">\\</span><span class="s2">.damageCapture</span><span class="se">\\</span><span class="s2">.inlineWebPad&quot;</span>
            <span class="n">iframe</span> <span class="o">=</span> <span class="n">wait_for_element_stable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">iframe_selector</span><span class="p">)</span>
            <span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">iframe</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –≤ iframe –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø—Ü–∏—è–º–∏&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ iframe: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>



<div class="viewcode-block" id="extract_option_zones">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_option_zones">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_option_zones</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ò–∑–≤–ª–µ–∫–∞–µ—Ç –í–°–ï –∑–æ–Ω—ã –æ–ø—Ü–∏–π –∏–∑ div#model-options-sections –≤–∫–ª—é—á–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîç –ò–∑–≤–ª–µ–∫–∞–µ–º –í–°–ï –∑–æ–Ω—ã –æ–ø—Ü–∏–π –∏–∑ model-options-sections (–≤–∫–ª—é—á–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ)&quot;</span><span class="p">)</span>
    <span class="n">zones</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ensure_in_iframe</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ iframe –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–æ–Ω&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">zones</span>
        
        <span class="n">zones_container</span> <span class="o">=</span> <span class="n">wait_for_element_stable</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="s2">&quot;#model-options-sections&quot;</span><span class="p">)</span>
        <span class="n">zone_sections</span> <span class="o">=</span> <span class="n">zones_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;div.model-options-section&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">zone_sections</span><span class="p">)</span><span class="si">}</span><span class="s2"> —Å–µ–∫—Ü–∏–π –∑–æ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">zone_sections</span><span class="p">:</span>
            <span class="n">section_id</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
            <span class="n">data_value</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;data-value&quot;</span><span class="p">)</span>
            
            <span class="c1"># –£–ë–ò–†–ê–ï–ú –§–ò–õ–¨–¢–†–ê–¶–ò–Æ - —Ç–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∑–æ–Ω—ã –≤–∫–ª—é—á–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ</span>
            <span class="c1"># if section_id in [&quot;model-options-section-all-selected&quot;, &quot;model-options-section-zone-relevant&quot;]:</span>
            <span class="c1">#     logger.debug(f&quot;‚è© –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ–∫—Ü–∏—é: {section_id}&quot;)</span>
            <span class="c1">#     continue</span>
                
            <span class="k">if</span> <span class="n">section_id</span> <span class="ow">and</span> <span class="p">(</span><span class="n">section_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;model-options-section-&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">section_id</span> <span class="o">==</span> <span class="s2">&quot;predefined-model-options-section&quot;</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">description_span</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;span.model-options-section-description&quot;</span><span class="p">)</span>
                    <span class="n">zone_title</span> <span class="o">=</span> <span class="n">description_span</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    
                    <span class="k">if</span> <span class="n">zone_title</span><span class="p">:</span>
                        <span class="n">zones</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">section_id</span><span class="p">,</span>
                            <span class="s2">&quot;data_value&quot;</span><span class="p">:</span> <span class="n">data_value</span><span class="p">,</span>
                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">zone_title</span><span class="p">,</span>
                            <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="n">section</span>
                        <span class="p">})</span>
                        <span class="c1"># –ü–æ–º–µ—á–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</span>
                        <span class="n">zone_type</span> <span class="o">=</span> <span class="s2">&quot;—Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è&quot;</span> <span class="k">if</span> <span class="n">section_id</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;model-options-section-all-selected&quot;</span><span class="p">,</span> <span class="s2">&quot;model-options-section-zone-relevant&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;–æ–±—ã—á–Ω–∞—è&quot;</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìù –ó–æ–Ω–∞ –æ–ø—Ü–∏–π (</span><span class="si">{</span><span class="n">zone_type</span><span class="si">}</span><span class="s2">): &#39;</span><span class="si">{</span><span class="n">zone_title</span><span class="si">}</span><span class="s2">&#39; (ID: </span><span class="si">{</span><span class="n">section_id</span><span class="si">}</span><span class="s2">, data-value: </span><span class="si">{</span><span class="n">data_value</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
                        
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–æ–Ω—ã </span><span class="si">{</span><span class="n">section_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>
        
        

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">zones</span><span class="p">)</span><span class="si">}</span><span class="s2"> –∑–æ–Ω –æ–ø—Ü–∏–π (–≤–∫–ª—é—á–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">zones</span>
        
    <span class="k">except</span> <span class="p">(</span><span class="n">TimeoutException</span><span class="p">,</span> <span class="n">WebDriverException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–æ–Ω –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span></div>



<div class="viewcode-block" id="parse_option_code_title">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.parse_option_code_title">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">parse_option_code_title</span><span class="p">(</span><span class="n">option_text</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ü–∞—Ä—Å–∏—Ç —Ç–µ–∫—Å—Ç –æ–ø—Ü–∏–∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–¥–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">option_text</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">option_text</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
    
    <span class="n">original_text</span> <span class="o">=</span> <span class="n">option_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
    <span class="c1"># –ï—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å &quot; - &quot;, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ</span>
    <span class="n">separator_index</span> <span class="o">=</span> <span class="n">original_text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">separator_index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">original_text</span><span class="p">[:</span><span class="n">separator_index</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">original_text</span><span class="p">[</span><span class="n">separator_index</span> <span class="o">+</span> <span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        
        <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–æ–¥ –Ω–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (–æ–±—ã—á–Ω–æ –∫–æ–¥—ã –∫–æ—Ä–æ—Ç–∫–∏–µ)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">code</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">code</span> <span class="ow">and</span> <span class="n">title</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">code</span><span class="p">,</span> <span class="n">title</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># –ï—Å–ª–∏ &quot;–∫–æ–¥&quot; —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π, –≤–µ—Ä–æ—è—Ç–Ω–æ —ç—Ç–æ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∏–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">original_text</span>
    
    <span class="c1"># –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∫–æ–¥ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ (–±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã)</span>
    <span class="n">code_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^([A-Za-z0-9]{1,10})\s+(.+)&#39;</span><span class="p">,</span> <span class="n">original_text</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">code_match</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">code_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">code_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        
        <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ title –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º –∫–æ–¥–∞</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è</span>
            <span class="k">return</span> <span class="n">code</span><span class="p">,</span> <span class="n">title</span>
    
    <span class="c1"># –ï—Å–ª–∏ –Ω–µ —Å–º–æ–≥–ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –∫–æ–¥ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–µ—Å—å —Ç–µ–∫—Å—Ç –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
    <span class="c1"># –ù–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">original_text</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–π –æ–ø—Ü–∏–∏</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">original_text</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç, –≤–µ—Ä–æ—è—Ç–Ω–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç: &#39;</span><span class="si">{</span><span class="n">original_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span></div>



<div class="viewcode-block" id="extract_sections_from_container">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_sections_from_container">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_sections_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–µ–∫—Ü–∏–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å&quot;&quot;&quot;</span>
    <span class="n">sections</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">section_selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;div.model-options-sub-page-title&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[class*=&#39;sub-page-title&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[id*=&#39;sub-page-title&#39;]&quot;</span>
        <span class="p">]</span>
        
        <span class="n">section_elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">section_selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">found_sections</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">found_sections</span><span class="p">:</span>
                    <span class="n">section_elements</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">found_sections</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">found_sections</span><span class="p">)</span><span class="si">}</span><span class="s2"> —Å–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä: </span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —Å–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ </span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">unique_sections</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seen_texts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">section_el</span> <span class="ow">in</span> <span class="n">section_elements</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">section_text</span> <span class="o">=</span> <span class="n">section_el</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">section_text</span> <span class="ow">and</span> <span class="n">section_text</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_texts</span><span class="p">:</span>
                    <span class="n">unique_sections</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                        <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="n">section_el</span><span class="p">,</span>
                        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">section_text</span>
                    <span class="p">})</span>
                    <span class="n">seen_texts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">section_text</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìã –ù–∞–π–¥–µ–Ω–∞ —Å–µ–∫—Ü–∏—è: &#39;</span><span class="si">{</span><span class="n">section_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ–∫—Ü–∏–∏: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">sections</span> <span class="o">=</span> <span class="n">unique_sections</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–µ–∫—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìã –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span><span class="si">}</span><span class="s2"> —Å–µ–∫—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sections</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_azt_options_from_container">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_azt_options_from_container">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_azt_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ò–∑–≤–ª–µ–∫–∞–µ—Ç –æ–ø—Ü–∏–∏ AZT –∑–æ–Ω—ã —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏&quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîß –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ AZT –∑–æ–Ω—ã...&quot;</span><span class="p">)</span>
        
        <span class="c1"># –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä AZT</span>
        <span class="n">azt_containers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">azt_selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#paint-system-options&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#azt-paint-system-options&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;div[id*=&#39;paint-system&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[id*=&#39;azt&#39;]&quot;</span>
        <span class="p">]</span>
        
        <span class="k">for</span> <span class="n">container_selector</span> <span class="ow">in</span> <span class="n">azt_selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">containers</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">container_selector</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">containers</span><span class="p">:</span>
                    <span class="n">azt_containers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω AZT –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑: </span><span class="si">{</span><span class="n">container_selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">azt_containers</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;‚ÑπÔ∏è AZT –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="c1"># –ò—â–µ–º —Å–ø–∏—Å–æ–∫ AZT –æ–ø—Ü–∏–π</span>
        <span class="n">li_elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">azt_containers</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–∑ HTML –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                <span class="n">ul_elements</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;ul.ps-azt-list&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ul</span> <span class="ow">in</span> <span class="n">ul_elements</span><span class="p">:</span>
                    <span class="n">li_elements</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ul</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;li&quot;</span><span class="p">))</span>
                    
                <span class="k">if</span> <span class="n">li_elements</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">li_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> AZT –æ–ø—Ü–∏–π –≤ ul.ps-azt-list&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Fallback —Å–µ–ª–µ–∫—Ç–æ—Ä—ã</span>
                    <span class="n">fallback_selectors</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="s2">&quot;ul[class*=&#39;azt-list&#39;] li&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ul[class*=&#39;azt&#39;] li&quot;</span><span class="p">,</span> 
                        <span class="s2">&quot;li[class*=&#39;azt&#39;]&quot;</span>
                    <span class="p">]</span>
                    <span class="k">for</span> <span class="n">fallback</span> <span class="ow">in</span> <span class="n">fallback_selectors</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">li_elements</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">fallback</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">li_elements</span><span class="p">:</span>
                                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">li_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> AZT –æ–ø—Ü–∏–π —á–µ—Ä–µ–∑ fallback: </span><span class="si">{</span><span class="n">fallback</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                                <span class="k">break</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">li_elements</span><span class="p">:</span>
                        <span class="k">break</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ AZT –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">li_elements</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;‚ÑπÔ∏è AZT –æ–ø—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">li_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> AZT —ç–ª–µ–º–µ–Ω—Ç–æ–≤&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">li</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">li_elements</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># –ò—â–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ü–∏–∏</span>
                <span class="n">description_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">description_selectors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;div.ps-azt-description-text&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;div[class*=&#39;description-text&#39;]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;div[class*=&#39;azt-description&#39;]&quot;</span>
                <span class="p">]</span>
                
                <span class="k">for</span> <span class="n">desc_selector</span> <span class="ow">in</span> <span class="n">description_selectors</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">desc_element</span> <span class="o">=</span> <span class="n">li</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">desc_selector</span><span class="p">)</span>
                        <span class="n">description_text</span> <span class="o">=</span> <span class="n">desc_element</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">description_text</span><span class="p">:</span>
                            <span class="k">break</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">continue</span>
                
                <span class="k">if</span> <span class="ow">not</span> <span class="n">description_text</span><span class="p">:</span>
                    <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;AZT —ç–ª–µ–º–µ–Ω—Ç </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                    <span class="k">continue</span>
                
                <span class="c1"># –ò—â–µ–º —Å—Ç–∞—Ç—É—Å —á–µ–∫–±–æ–∫—Å–∞</span>
                <span class="n">is_selected</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">checkbox_selectors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;input[type=&#39;checkbox&#39;]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;input[type=&#39;checkbox&#39;].toggle-input&quot;</span><span class="p">,</span> 
                    <span class="s2">&quot;span.ps-azt-checkbox-container input[type=&#39;checkbox&#39;]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;label.toggle input[type=&#39;checkbox&#39;]&quot;</span>
                <span class="p">]</span>
                
                <span class="k">for</span> <span class="n">cb_selector</span> <span class="ow">in</span> <span class="n">checkbox_selectors</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">li</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">cb_selector</span><span class="p">)</span>
                        <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –∞—Ç—Ä–∏–±—É—Ç checked –∏ —Å–≤–æ–π—Å—Ç–≤–æ checked</span>
                        <span class="n">checked_attr</span> <span class="o">=</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">)</span>
                        <span class="n">checked_prop</span> <span class="o">=</span> <span class="n">checkbox</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">)</span>
                        <span class="n">is_selected</span> <span class="o">=</span> <span class="n">checked_attr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">checked_prop</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;AZT –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: checked_attr=</span><span class="si">{</span><span class="n">checked_attr</span><span class="si">}</span><span class="s2">, checked_prop=</span><span class="si">{</span><span class="n">checked_prop</span><span class="si">}</span><span class="s2">, selected=</span><span class="si">{</span><span class="n">is_selected</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">break</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">cb_error</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è AZT —ç–ª–µ–º–µ–Ω—Ç </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">, —Å–µ–ª–µ–∫—Ç–æ—Ä </span><span class="si">{</span><span class="n">cb_selector</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cb_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">continue</span>
                
                <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏—é —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º AZT</span>
                <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;AZT - </span><span class="si">{</span><span class="n">description_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="n">is_selected</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;azt_zone&quot;</span>
                <span class="p">})</span>
                
                <span class="n">status_mark</span> <span class="o">=</span> <span class="s2">&quot;‚úÖ&quot;</span> <span class="k">if</span> <span class="n">is_selected</span> <span class="k">else</span> <span class="s2">&quot;‚ùå&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status_mark</span><span class="si">}</span><span class="s2"> AZT –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: AZT - </span><span class="si">{</span><span class="n">description_text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;AZT —ç–ª–µ–º–µ–Ω—Ç </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="si">}</span><span class="s2"> AZT –æ–ø—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è AZT: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_predefined_options_from_container">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_predefined_options_from_container">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_predefined_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ predefined-model-options&quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîß –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π...&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ò—â–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π</span>
        <span class="n">predefined_containers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">predefined_selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#predefined-model-options&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[id*=&#39;predefined-model-options&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[class*=&#39;predefined-model-options&#39;]&quot;</span>
        <span class="p">]</span>
        
        <span class="k">for</span> <span class="n">container_selector</span> <span class="ow">in</span> <span class="n">predefined_selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">containers</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">container_selector</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">containers</span><span class="p">:</span>
                    <span class="n">predefined_containers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π —á–µ—Ä–µ–∑: </span><span class="si">{</span><span class="n">container_selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">predefined_containers</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;‚ÑπÔ∏è –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="c1"># –ò—â–µ–º –æ–ø—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ</span>
        <span class="n">option_elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="n">predefined_containers</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># –ò—â–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ–ø—Ü–∏–π</span>
                <span class="n">option_selectors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;div.model-option&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;div[class*=&#39;model-option&#39;]&quot;</span><span class="p">,</span> 
                    <span class="s2">&quot;div[class*=&#39;option&#39;]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;li.model-option&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;li[class*=&#39;option&#39;]&quot;</span>
                <span class="p">]</span>
                
                <span class="k">for</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">option_selectors</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">found_options</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">found_options</span><span class="p">:</span>
                            <span class="n">option_elements</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">found_options</span><span class="p">)</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">found_options</span><span class="p">)</span><span class="si">}</span><span class="s2"> –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π —á–µ—Ä–µ–∑: </span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">continue</span>
                        
                <span class="k">if</span> <span class="n">option_elements</span><span class="p">:</span>
                    <span class="k">break</span>
                    
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">option_elements</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;‚ÑπÔ∏è –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">option_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        
        <span class="c1"># –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">option_elements</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">option_data</span><span class="p">,</span> <span class="n">element_errors</span> <span class="o">=</span> <span class="n">extract_option_from_element</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;predefined&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">element_errors</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">option_data</span><span class="p">:</span>
                    <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option_data</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">option_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;–ë–ï–ó –ù–ê–ó–í–ê–ù–ò–Ø&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="si">}</span><span class="s2"> –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_regular_options_from_container">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_regular_options_from_container">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_regular_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π –∏–∑ regular-options —Å–µ–∫—Ü–∏–∏&quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîß –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ regular-options —Å–µ–∫—Ü–∏–∏...&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ò—â–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä regular-options</span>
        <span class="n">regular_options_container</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">regular_selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#regular-options&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div#regular-options&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[class*=&#39;regular-options&#39;]&quot;</span>
        <span class="p">]</span>
        
        <span class="k">for</span> <span class="n">container_selector</span> <span class="ow">in</span> <span class="n">regular_selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">containers</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">container_selector</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">containers</span><span class="p">:</span>
                    <span class="n">regular_options_container</span> <span class="o">=</span> <span class="n">containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä regular-options —á–µ—Ä–µ–∑: </span><span class="si">{</span><span class="n">container_selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">regular_options_container</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;‚ÑπÔ∏è –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä regular-options –Ω–µ –Ω–∞–π–¥–µ–Ω&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="c1"># –ò—â–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º isolated-model-option-in-group</span>
        <span class="n">isolated_elements</span> <span class="o">=</span> <span class="n">regular_options_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;div.isolated-model-option-in-group&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isolated_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤ isolated-model-option-in-group&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—â–µ–º –ø–æ –¥—Ä—É–≥–∏–º —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isolated_elements</span><span class="p">:</span>
            <span class="n">isolated_elements</span> <span class="o">=</span> <span class="n">regular_options_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[contains(@class, &#39;isolated-model-option-in-group&#39;)]&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isolated_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ XPath&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—â–µ–º –ø–æ id –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è —Å &#39;s-&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isolated_elements</span><span class="p">:</span>
            <span class="n">isolated_elements</span> <span class="o">=</span> <span class="n">regular_options_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[starts-with(@id, &#39;s-&#39;)]&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isolated_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å id –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è —Å &#39;s-&#39;&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isolated_elements</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–ø—Ü–∏–π –≤ regular-options&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isolated_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤ regular-options&quot;</span><span class="p">)</span>
        
        <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä –ü–µ—Ä–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã regular-options:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">isolated_elements</span><span class="p">[:</span><span class="mi">3</span><span class="p">]):</span>
            <span class="n">elem_class</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="n">elem_id</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="n">elem_text</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()[:</span><span class="mi">50</span><span class="p">]</span> <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. class=&#39;</span><span class="si">{</span><span class="n">elem_class</span><span class="si">}</span><span class="s2">&#39; id=&#39;</span><span class="si">{</span><span class="n">elem_id</span><span class="si">}</span><span class="s2">&#39; text=&#39;</span><span class="si">{</span><span class="n">elem_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        
        <span class="c1"># –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">isolated_elements</span><span class="p">):</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">option_data</span><span class="p">,</span> <span class="n">element_errors</span> <span class="o">=</span> <span class="n">extract_option_from_element</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;regular&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">element_errors</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">option_data</span><span class="p">:</span>
                    <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option_data</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ Regular –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">option_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;–ë–ï–ó –ù–ê–ó–í–ê–ù–ò–Ø&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Regular –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="si">}</span><span class="s2"> regular –æ–ø—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è regular –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="find_all_option_elements_in_container">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.find_all_option_elements_in_container">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">find_all_option_elements_in_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ–ø—Ü–∏–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ&quot;&quot;&quot;</span>
    <span class="n">option_elements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;üîç –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–ø—Ü–∏–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ...&quot;</span><span class="p">)</span>
        
        <span class="n">option_selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;div.model-option&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[class*=&#39;model-option&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[class*=&#39;option&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;*[class*=&#39;model-option&#39;]&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è isolated-model-option-in-group</span>
            <span class="s2">&quot;div.isolated-model-option-in-group&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[class*=&#39;isolated-model-option-in-group&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;*[class*=&#39;isolated-model-option-in-group&#39;]&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–ø—Ü–∏–π</span>
            <span class="s2">&quot;div[id^=&#39;s-&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[data-value]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[data-parent]&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å model-option-description</span>
            <span class="s2">&quot;div:has(span.model-option-description)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div:has(span[class*=&#39;option-description&#39;])&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ model-option-group</span>
            <span class="s2">&quot;div.model-option-group div[class*=&#39;model-option&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div.model-option-group div[class*=&#39;option&#39;]&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ model-option-sub-group-content</span>
            <span class="s2">&quot;div.model-option-sub-group-content div[class*=&#39;model-option&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div.model-option-sub-group-content div[class*=&#39;option&#39;]&quot;</span>
        <span class="p">]</span>
        
        <span class="k">for</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">option_selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä: </span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">found_elements</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
                
                <span class="n">new_elements</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">found_elements</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">option_elements</span><span class="p">:</span>
                        <span class="n">option_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                        <span class="n">new_elements</span> <span class="o">+=</span> <span class="mi">1</span>
                
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –°–µ–ª–µ–∫—Ç–æ—Ä &#39;</span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&#39;: –Ω–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">found_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –Ω–æ–≤—ã—Ö: </span><span class="si">{</span><span class="n">new_elements</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —á–µ—Ä–µ–∑ </span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">option_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">option_elements</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–ø—Ü–∏–π, –≤—ã–ø–æ–ª–Ω—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...&quot;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># –ò—â–µ–º –≤—Å–µ div —ç–ª–µ–º–µ–Ω—Ç—ã</span>
                <span class="n">all_divs</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;div&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –í—Å–µ–≥–æ div —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_divs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å class —Å–æ–¥–µ—Ä–∂–∞—â–∏–º &#39;option&#39;</span>
                <span class="n">option_like</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[contains(@class, &#39;option&#39;)]&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å &#39;option&#39; –≤ –∫–ª–∞—Å—Å–µ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">option_like</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å class —Å–æ–¥–µ—Ä–∂–∞—â–∏–º &#39;model&#39;</span>
                <span class="n">model_like</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[contains(@class, &#39;model&#39;)]&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å &#39;model&#39; –≤ –∫–ª–∞—Å—Å–µ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">model_like</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å class —Å–æ–¥–µ—Ä–∂–∞—â–∏–º &#39;isolated&#39;</span>
                <span class="n">isolated_like</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[contains(@class, &#39;isolated&#39;)]&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å &#39;isolated&#39; –≤ –∫–ª–∞—Å—Å–µ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">isolated_like</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å id –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è —Å &#39;s-&#39;</span>
                <span class="n">s_id_elements</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[starts-with(@id, &#39;s-&#39;)]&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å id –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è —Å &#39;s-&#39;: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">s_id_elements</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å data-value</span>
                <span class="n">data_value_elements</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;.//*[@data-value]&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –≠–ª–µ–º–µ–Ω—Ç–æ–≤ —Å data-value: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data_value_elements</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ div —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;    üìä –ü–µ—Ä–≤—ã–µ 5 div —ç–ª–µ–º–µ–Ω—Ç–æ–≤:&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">div</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_divs</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>
                    <span class="n">div_class</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">div_id</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">div_text</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()[:</span><span class="mi">50</span><span class="p">]</span> <span class="k">if</span> <span class="n">div</span><span class="o">.</span><span class="n">text</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;        </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. class=&#39;</span><span class="si">{</span><span class="n">div_class</span><span class="si">}</span><span class="s2">&#39; id=&#39;</span><span class="si">{</span><span class="n">div_id</span><span class="si">}</span><span class="s2">&#39; text=&#39;</span><span class="si">{</span><span class="n">div_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                    
                <span class="c1"># –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å isolated –≤ –∫–ª–∞—Å—Å–µ</span>
                <span class="k">if</span> <span class="n">isolated_like</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;    üìä –≠–ª–µ–º–µ–Ω—Ç—ã —Å &#39;isolated&#39; –≤ –∫–ª–∞—Å—Å–µ:&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">isolated_like</span><span class="p">[:</span><span class="mi">3</span><span class="p">]):</span>
                        <span class="n">elem_class</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                        <span class="n">elem_id</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                        <span class="n">elem_text</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()[:</span><span class="mi">50</span><span class="p">]</span> <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;        </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. class=&#39;</span><span class="si">{</span><span class="n">elem_class</span><span class="si">}</span><span class="s2">&#39; id=&#39;</span><span class="si">{</span><span class="n">elem_id</span><span class="si">}</span><span class="s2">&#39; text=&#39;</span><span class="si">{</span><span class="n">elem_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                        
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">diag_error</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: </span><span class="si">{</span><span class="n">diag_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">option_elements</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_option_from_element">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_option_from_element">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_option_from_element</span><span class="p">(</span><span class="n">option_element</span><span class="p">,</span> <span class="n">section_suffix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π&quot;&quot;&quot;</span>
    <span class="n">option_data</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">class_attr</span> <span class="o">=</span> <span class="n">option_element</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
        <span class="n">is_selected</span> <span class="o">=</span> <span class="s2">&quot;selected&quot;</span> <span class="ow">in</span> <span class="n">class_attr</span>
        
        <span class="n">option_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">text_selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;span.model-option-description&quot;</span><span class="p">,</span>
            <span class="s2">&quot;span[class*=&#39;option-description&#39;]&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;span[class*=&#39;description&#39;]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;*[class*=&#39;description&#39;]&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è isolated-model-option-in-group</span>
            <span class="s2">&quot;span.mo-white-space&quot;</span><span class="p">,</span>
            <span class="s2">&quot;span[class*=&#39;white-space&#39;]&quot;</span><span class="p">,</span>
            <span class="c1"># –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span>
            <span class="s2">&quot;span&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span>
        <span class="p">]</span>
        
        <span class="k">for</span> <span class="n">text_selector</span> <span class="ow">in</span> <span class="n">text_selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">text_elements</span> <span class="o">=</span> <span class="n">option_element</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">text_selector</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">text_element</span> <span class="ow">in</span> <span class="n">text_elements</span><span class="p">:</span>
                    <span class="n">candidate_text</span> <span class="o">=</span> <span class="n">text_element</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">candidate_text</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidate_text</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">option_text</span> <span class="o">=</span> <span class="n">candidate_text</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">option_text</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">option_text</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">option_text</span> <span class="o">=</span> <span class="n">option_element</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">option_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lines</span><span class="p">:</span>
                    <span class="n">option_text</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        
        <span class="k">if</span> <span class="n">option_text</span><span class="p">:</span>
            <span class="n">code</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">parse_option_code_title</span><span class="p">(</span><span class="n">option_text</span><span class="p">)</span>
            
            <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ü–∞—Ä—Å–∏–Ω–≥: &#39;</span><span class="si">{</span><span class="n">option_text</span><span class="si">}</span><span class="s2">&#39; -&gt; –∫–æ–¥=&#39;</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&#39;, –Ω–∞–∑–≤–∞–Ω–∏–µ=&#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            
            <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –ª–∏–±–æ –∫–æ–¥ –ª–∏–±–æ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">code</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞: &#39;</span><span class="si">{</span><span class="n">option_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">errors</span>
            
            <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –±–µ–∑ –∫–æ–¥–∞</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">code</span> <span class="ow">and</span> <span class="n">title</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">suspicious_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;–∫–ø–ø&quot;</span><span class="p">,</span> <span class="s2">&quot;–ª–∫–ø&quot;</span><span class="p">,</span> <span class="s2">&quot;–±–µ–Ω–∑–∏–Ω&quot;</span><span class="p">,</span> <span class="s2">&quot;–¥–∏–∑–µ–ª—å&quot;</span><span class="p">,</span> <span class="s2">&quot;–≥–∞–∑&quot;</span><span class="p">,</span> <span class="s2">&quot;–∞–∫–ø&quot;</span><span class="p">,</span> <span class="s2">&quot;–º–∫–ø&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">suspicious_words</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: &#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">errors</span>
            
            <span class="n">final_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">section_suffix</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">section_suffix</span> <span class="ow">and</span> <span class="n">title</span> <span class="k">else</span> <span class="n">title</span>
            
            <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç—å</span>
            <span class="k">if</span> <span class="n">final_title</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">final_title</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">option_data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">final_title</span><span class="p">,</span>
                    <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="n">is_selected</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;regular_option&quot;</span>
                <span class="p">}</span>
                
                <span class="n">status_mark</span> <span class="o">=</span> <span class="s2">&quot;‚úÖ&quot;</span> <span class="k">if</span> <span class="n">is_selected</span> <span class="k">else</span> <span class="s2">&quot;‚ùå&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status_mark</span><span class="si">}</span><span class="s2"> –û–ø—Ü–∏—è: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">final_title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: &#39;</span><span class="si">{</span><span class="n">final_title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;–ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ–∫—Å—Ç –æ–ø—Ü–∏–∏&quot;</span><span class="p">)</span>
            
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–∏: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">option_data</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_options_with_sections">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_options_with_sections">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_options_with_sections</span><span class="p">(</span><span class="n">content_container</span><span class="p">,</span> <span class="n">sections</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ò–∑–≤–ª–µ–∫–∞–µ—Ç –æ–ø—Ü–∏–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Å–µ–∫—Ü–∏—è–º&quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø—Ü–∏–∏ –ø–æ —Å–µ–∫—Ü–∏—è–º (–Ω–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span><span class="si">}</span><span class="s2"> —Å–µ–∫—Ü–∏–π)&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">sections</span><span class="p">:</span>
            <span class="n">section_name</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
            <span class="n">section_element</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="s2">&quot;element&quot;</span><span class="p">]</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">next_elements</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">section_element</span>
                
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;following-sibling::*[1]&quot;</span><span class="p">)</span>
                        
                        <span class="n">current_class</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">sec_class</span> <span class="ow">in</span> <span class="n">current_class</span> <span class="k">for</span> <span class="n">sec_class</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;sub-page-title&quot;</span><span class="p">,</span> <span class="s2">&quot;section-title&quot;</span><span class="p">]):</span>
                            <span class="k">break</span>
                        
                        <span class="n">next_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
                        
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">next_elements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
                            <span class="k">break</span>
                            
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">break</span>
                
                <span class="n">section_option_count</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">next_elements</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">inner_option_elements</span><span class="p">,</span> <span class="n">inner_errors</span> <span class="o">=</span> <span class="n">find_all_option_elements_in_container</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">inner_errors</span><span class="p">)</span>
                        
                        <span class="k">for</span> <span class="n">option_element</span> <span class="ow">in</span> <span class="n">inner_option_elements</span><span class="p">:</span>
                            <span class="n">option_data</span><span class="p">,</span> <span class="n">option_errors</span> <span class="o">=</span> <span class="n">extract_option_from_element</span><span class="p">(</span><span class="n">option_element</span><span class="p">,</span> <span class="n">section_name</span><span class="p">)</span>
                            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">option_errors</span><span class="p">)</span>
                            
                            <span class="k">if</span> <span class="n">option_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ None</span>
                                <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option_data</span><span class="p">)</span>
                                <span class="n">section_option_count</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û–ø—Ü–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–∞ –≤ —Å–µ–∫—Ü–∏–∏ &#39;</span><span class="si">{</span><span class="n">section_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                                
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å–µ–∫—Ü–∏–∏ &#39;</span><span class="si">{</span><span class="n">section_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                        <span class="k">continue</span>
                
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìã –°–µ–∫—Ü–∏—è &#39;</span><span class="si">{</span><span class="n">section_name</span><span class="si">}</span><span class="s2">&#39;: –Ω–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="n">section_option_count</span><span class="si">}</span><span class="s2"> –≤–∞–ª–∏–¥–Ω—ã—Ö –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ–∫—Ü–∏–∏ &#39;</span><span class="si">{</span><span class="n">section_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">continue</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π –ø–æ —Å–µ–∫—Ü–∏—è–º: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_options_without_sections">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_options_without_sections">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_options_without_sections</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ò–∑–≤–ª–µ–∫–∞–µ—Ç –æ–ø—Ü–∏–∏ –±–µ–∑ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ —Å–µ–∫—Ü–∏—è–º&quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîß –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø—Ü–∏–∏ –±–µ–∑ —Å–µ–∫—Ü–∏–π&quot;</span><span class="p">)</span>
        
        <span class="n">option_elements</span><span class="p">,</span> <span class="n">search_errors</span> <span class="o">=</span> <span class="n">find_all_option_elements_in_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">search_errors</span><span class="p">)</span>
        
        <span class="n">valid_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">option_element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">option_elements</span><span class="p">):</span>
            
            <span class="n">option_data</span><span class="p">,</span> <span class="n">option_errors</span> <span class="o">=</span> <span class="n">extract_option_from_element</span><span class="p">(</span><span class="n">option_element</span><span class="p">)</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">option_errors</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">option_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ None</span>
                <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option_data</span><span class="p">)</span>
                <span class="n">valid_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –≠–ª–µ–º–µ–Ω—Ç –æ–ø—Ü–∏–∏ </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω&quot;</span><span class="p">)</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="n">valid_count</span><span class="si">}</span><span class="s2"> –≤–∞–ª–∏–¥–Ω—ã—Ö –æ–ø—Ü–∏–π –±–µ–∑ —Å–µ–∫—Ü–∏–π (–∏–∑ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">option_elements</span><span class="p">)</span><span class="si">}</span><span class="s2"> —ç–ª–µ–º–µ–Ω—Ç–æ–≤)&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π –±–µ–∑ —Å–µ–∫—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="extract_zone_options_universal">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_zone_options_universal">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_zone_options_universal</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π –∏–∑ –ª—é–±–æ–π –∑–æ–Ω—ã —Å –æ–±–æ–±—â–µ–Ω–Ω—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–æ–Ω—É: &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìç ID –∑–æ–Ω—ã: </span><span class="si">{</span><span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;–ù–ï–¢&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìç Data-value: </span><span class="si">{</span><span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data_value&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;–ù–ï–¢&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">all_errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">processing_notes</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ensure_in_iframe</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ iframe –¥–ª—è –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[],</span> <span class="p">[</span><span class="n">error_msg</span><span class="p">],</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ö–ª–∏–∫–∞–µ–º –ø–æ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ù–∞–¥–µ–∂–Ω—ã–π –∫–ª–∏–∫ –ø–æ —ç–ª–µ–º–µ–Ω—Ç—É —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –æ–±—ã—á–Ω—ã–π –∫–ª–∏–∫</span>
            <span class="n">zone</span><span class="p">[</span><span class="s1">&#39;element&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –û–±—ã—á–Ω—ã–π –∫–ª–∏–∫ –ø–æ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; –≤—ã–ø–æ–ª–Ω–µ–Ω&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">click_error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û–±—ã—á–Ω—ã–π –∫–ª–∏–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –ø—Ä–æ–±—É–µ–º JavaScript –∫–ª–∏–∫: </span><span class="si">{</span><span class="n">click_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># –ï—Å–ª–∏ –æ–±—ã—á–Ω—ã–π –∫–ª–∏–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º JavaScript</span>
                <span class="n">driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s2">&quot;arguments[0].click();&quot;</span><span class="p">,</span> <span class="n">zone</span><span class="p">[</span><span class="s1">&#39;element&#39;</span><span class="p">])</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ JavaScript –∫–ª–∏–∫ –ø–æ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; –≤—ã–ø–æ–ª–Ω–µ–Ω&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">js_error</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∫–ª–∏–∫–Ω—É—Ç—å –ø–æ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">js_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[],</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;–ù–µ —É–¥–∞–ª–æ—Å—å –∫–ª–∏–∫–Ω—É—Ç—å –ø–æ –∑–æ–Ω–µ: </span><span class="si">{</span><span class="n">js_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;–û—à–∏–±–∫–∞ –∫–ª–∏–∫–∞&quot;</span><span class="p">]</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîÑ –û–∂–∏–¥–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
        
        <span class="c1"># –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        
        <span class="n">content_container</span> <span class="o">=</span> <span class="n">wait_for_content_loaded</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–ª—è –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        
        <span class="c1"># –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">container_text</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">container_text</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—É—Å—Ç–æ–π, –ø—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑...&quot;</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>  <span class="c1"># –ñ–¥–µ–º –µ—â–µ 2 —Å–µ–∫—É–Ω–¥—ã</span>
                <span class="n">content_container</span> <span class="o">=</span> <span class="n">wait_for_content_loaded</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
                <span class="n">container_text</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">container_text</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–µ—Ç—Å—è –ø—É—Å—Ç—ã–º –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="p">[],</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; –ø—É—Å—Ç–æ–π&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;–ü—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">check_error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">check_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">container_class</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="n">container_id</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ID=&#39;</span><span class="si">{</span><span class="n">container_id</span><span class="si">}</span><span class="s2">&#39;, CLASS=&#39;</span><span class="si">{</span><span class="n">container_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            
            <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span>
            <span class="n">child_elements</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s2">&quot;./*&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä –î–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">child_elements</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
            <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">child_elements</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>
                <span class="n">child_tag</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">tag_name</span>
                <span class="n">child_class</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                <span class="n">child_id</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. &lt;</span><span class="si">{</span><span class="n">child_tag</span><span class="si">}</span><span class="s2">&gt; id=&#39;</span><span class="si">{</span><span class="n">child_id</span><span class="si">}</span><span class="s2">&#39; class=&#39;</span><span class="si">{</span><span class="n">child_class</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">log_error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: </span><span class="si">{</span><span class="n">log_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø—É—Å—Ç—É—é –∑–æ–Ω—É</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">no_options_msg</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;#model-option-group-message&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;–ù–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π –¥–ª—è –¥–∞–Ω–Ω–æ–π –∑–æ–Ω—ã&quot;</span> <span class="ow">in</span> <span class="n">no_options_msg</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ÑπÔ∏è –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –ø—É—Å—Ç–∞—è –∑–æ–Ω–∞&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[{</span>
                    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;–ù–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π –¥–ª—è –¥–∞–Ω–Ω–æ–π –∑–æ–Ω—ã&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;empty_zone&quot;</span>
                <span class="p">}],</span> <span class="p">[],</span> <span class="p">[</span><span class="s2">&quot;–ó–æ–Ω–∞ –ø—É—Å—Ç–∞—è - —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–ø—Ü–∏–π&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="n">NoSuchElementException</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –ù–ï –ø—É—Å—Ç–∞—è (—Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–ø—Ü–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∑–æ–Ω—É &quot;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&quot;</span>
        <span class="k">if</span> <span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;model-options-section-all-selected&#39;</span> <span class="ow">or</span> <span class="s1">&#39;all-selected&#39;</span> <span class="ow">in</span> <span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ &#39;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&#39;&quot;</span><span class="p">)</span>
            <span class="n">all_selected_options</span><span class="p">,</span> <span class="n">all_selected_errors</span> <span class="o">=</span> <span class="n">extract_all_selected_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">)</span>
            <span class="n">all_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">all_selected_errors</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">all_selected_options</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–∞–∫ &#39;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&#39;&quot;</span><span class="p">)</span>
                <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ –∑–æ–Ω–∞ &#39;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&#39;&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">all_selected_options</span><span class="p">,</span> <span class="n">all_errors</span><span class="p">,</span> <span class="n">processing_notes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&quot;</span><span class="p">)</span>
        


        <span class="c1"># –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ AZT –∑–æ–Ω—É</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–æ–Ω—É &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; –Ω–∞ AZT...&quot;</span><span class="p">)</span>
        <span class="n">azt_options</span><span class="p">,</span> <span class="n">azt_errors</span> <span class="o">=</span> <span class="n">extract_azt_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">)</span>
        <span class="n">all_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">azt_errors</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">azt_options</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–∞–∫ AZT –∑–æ–Ω–∞&quot;</span><span class="p">)</span>
            <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ AZT –∑–æ–Ω–∞&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">azt_options</span><span class="p">,</span> <span class="n">all_errors</span><span class="p">,</span> <span class="n">processing_notes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ÑπÔ∏è –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –ù–ï AZT –∑–æ–Ω–∞&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ò—â–µ–º —Å–µ–∫—Ü–∏–∏</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ò—â–µ–º —Å–µ–∫—Ü–∏–∏ –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
        <span class="n">sections</span><span class="p">,</span> <span class="n">section_errors</span> <span class="o">=</span> <span class="n">extract_sections_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">)</span>
        <span class="n">all_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">section_errors</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ —Å–µ–∫—Ü–∏–π –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">sections</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">section</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sections</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìã –°–µ–∫—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: &#39;</span><span class="si">{</span><span class="n">section</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø—Ü–∏–∏</span>
        <span class="k">if</span> <span class="n">sections</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø—Ü–∏–∏ –ø–æ —Å–µ–∫—Ü–∏—è–º –¥–ª—è –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
            <span class="n">section_options</span><span class="p">,</span> <span class="n">section_option_errors</span> <span class="o">=</span> <span class="n">extract_options_with_sections</span><span class="p">(</span><span class="n">content_container</span><span class="p">,</span> <span class="n">sections</span><span class="p">)</span>
            <span class="n">all_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">section_option_errors</span><span class="p">)</span>
            <span class="n">options</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">section_options</span><span class="p">)</span>
            <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span><span class="si">}</span><span class="s2"> —Å–µ–∫—Ü–∏–π —Å –æ–ø—Ü–∏—è–º–∏&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìã –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">section_options</span><span class="p">)</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π –∏–∑ —Å–µ–∫—Ü–∏–π –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># –ò—â–µ–º –æ–ø—Ü–∏–∏ –±–µ–∑ —Å–µ–∫—Ü–∏–π (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–µ–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîß –ò—â–µ–º –æ–ø—Ü–∏–∏ –±–µ–∑ —Å–µ–∫—Ü–∏–π –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
            <span class="n">regular_options</span><span class="p">,</span> <span class="n">regular_errors</span> <span class="o">=</span> <span class="n">extract_regular_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">)</span>
            <span class="n">all_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">regular_errors</span><span class="p">)</span>
            <span class="n">options</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">regular_options</span><span class="p">)</span>
            <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ –∑–æ–Ω–∞ –±–µ–∑ —Å–µ–∫—Ü–∏–π&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìã –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">regular_options</span><span class="p">)</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π –±–µ–∑ —Å–µ–∫—Ü–∏–π –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        
        <span class="c1"># –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –ø–æ–ª–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é title –∏ code</span>
        <span class="n">initial_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
        <span class="n">unique_options</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seen_combinations</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ code –∏ title</span>
            <span class="n">option_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
            
            <span class="k">if</span> <span class="n">option_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_combinations</span><span class="p">:</span>
                <span class="n">unique_options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
                <span class="n">seen_combinations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">option_key</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîÑ –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç: </span><span class="si">{</span><span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ó–∞–º–µ–Ω—è–µ–º options –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">unique_options</span>
        <span class="n">duplicates_removed</span> <span class="o">=</span> <span class="n">initial_count</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">duplicates_removed</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîÑ –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">duplicates_removed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="c1"># –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
        <span class="n">total_found</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
        <span class="n">error_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_errors</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">total_found</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –∏–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="n">total_found</span><span class="si">}</span><span class="s2"> —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="n">error_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="n">total_found</span><span class="si">}</span><span class="s2"> —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
            
            <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìã –ü–µ—Ä–≤—ã–µ –æ–ø—Ü–∏–∏ –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">option</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">options</span><span class="p">[:</span><span class="mi">3</span><span class="p">]):</span>
                <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;‚úÖ&quot;</span> <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;‚ùå&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">total_found</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ... –∏ –µ—â–µ </span><span class="si">{</span><span class="n">total_found</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warning_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –æ–ø—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">warning_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;–ù–ï –ù–ê–ô–î–ï–ù–û –û–ü–¶–ò–ô - –≤–æ–∑–º–æ–∂–Ω–æ –Ω–æ–≤–∞—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞&quot;</span><span class="p">)</span>
            
            <span class="c1"># –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è –ø—É—Å—Ç—ã—Ö –∑–æ–Ω</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">all_divs</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;div&quot;</span><span class="p">)</span>
                <span class="n">all_spans</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;span&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –Ω–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_divs</span><span class="p">)</span><span class="si">}</span><span class="s2"> div –∏ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_spans</span><span class="p">)</span><span class="si">}</span><span class="s2"> span —ç–ª–µ–º–µ–Ω—Ç–æ–≤&quot;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        
        <span class="k">if</span> <span class="n">error_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">processing_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ </span><span class="si">{</span><span class="n">error_count</span><span class="si">}</span><span class="s2"> –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ: </span><span class="si">{</span><span class="n">error_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">all_errors</span><span class="p">,</span> <span class="n">processing_notes</span>
        
    <span class="k">except</span> <span class="p">(</span><span class="n">TimeoutException</span><span class="p">,</span> <span class="n">WebDriverException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π –∏–∑ –∑–æ–Ω—ã &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="p">[</span><span class="n">error_msg</span><span class="p">],</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span></div>



<div class="viewcode-block" id="extract_all_selected_options_from_container">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.extract_all_selected_options_from_container">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_all_selected_options_from_container</span><span class="p">(</span><span class="n">content_container</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π –∏–∑ –∑–æ–Ω—ã &#39;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&#39;&quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîß –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–æ–Ω—É &#39;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏&#39;...&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ò—â–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏</span>
        <span class="n">all_selected_container</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;#all-selected-options&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div.all-selected-options&quot;</span><span class="p">,</span>
            <span class="s2">&quot;div[id*=&#39;all-selected&#39;]&quot;</span>
        <span class="p">]</span>
        
        <span class="k">for</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">containers</span> <span class="o">=</span> <span class="n">content_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">containers</span><span class="p">:</span>
                    <span class="n">all_selected_container</span> <span class="o">=</span> <span class="n">containers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –ù–∞–π–¥–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π —á–µ—Ä–µ–∑: </span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">all_selected_container</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;‚ö†Ô∏è –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span>
        
        <span class="c1"># –ò—â–µ–º –≤—Å–µ –æ–ø—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ</span>
        <span class="n">option_containers</span> <span class="o">=</span> <span class="n">all_selected_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="s2">&quot;div.all-selected-container&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –ù–∞–π–¥–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">option_containers</span><span class="p">)</span><span class="si">}</span><span class="s2"> –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        
        <span class="c1"># –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</span>
        <span class="n">all_divs</span> <span class="o">=</span> <span class="n">all_selected_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;div&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –í—Å–µ–≥–æ div —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_divs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">option_container</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">option_containers</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># –õ–æ–≥–∏—Ä—É–µ–º ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</span>
                <span class="n">container_id</span> <span class="o">=</span> <span class="n">option_container</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;–±–µ–∑-id-</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">data_value</span> <span class="o">=</span> <span class="n">option_container</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;data-value&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;–±–µ–∑-data-value&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üîç –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: id=&#39;</span><span class="si">{</span><span class="n">container_id</span><span class="si">}</span><span class="s2">&#39;, data-value=&#39;</span><span class="si">{</span><span class="n">data_value</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                
                <span class="c1"># –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
                <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">category_selectors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;span[id*=&#39;-category&#39;]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;span[class*=&#39;category&#39;]&quot;</span>
                <span class="p">]</span>
                
                <span class="k">for</span> <span class="n">cat_selector</span> <span class="ow">in</span> <span class="n">category_selectors</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">category_element</span> <span class="o">=</span> <span class="n">option_container</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">cat_selector</span><span class="p">)</span>
                        <span class="n">category</span> <span class="o">=</span> <span class="n">category_element</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">category</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —á–µ—Ä–µ–∑ &#39;</span><span class="si">{</span><span class="n">cat_selector</span><span class="si">}</span><span class="s2">&#39;: &#39;</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                            <span class="k">break</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">continue</span>
                
                <span class="c1"># –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø—Ü–∏–∏</span>
                <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">description_selectors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s2">&quot;span[id*=&#39;-description&#39;]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;span.model-option-description&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;span[class*=&#39;description&#39;]&quot;</span>
                <span class="p">]</span>
                
                <span class="k">for</span> <span class="n">desc_selector</span> <span class="ow">in</span> <span class="n">description_selectors</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">description_element</span> <span class="o">=</span> <span class="n">option_container</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CSS_SELECTOR</span><span class="p">,</span> <span class="n">desc_selector</span><span class="p">)</span>
                        <span class="n">description</span> <span class="o">=</span> <span class="n">description_element</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ù–∞–π–¥–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —á–µ—Ä–µ–∑ &#39;</span><span class="si">{</span><span class="n">desc_selector</span><span class="si">}</span><span class="s2">&#39;: &#39;</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                            <span class="k">break</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">continue</span>
                
                <span class="k">if</span> <span class="ow">not</span> <span class="n">description</span><span class="p">:</span>
                    <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–í—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> (id: </span><span class="si">{</span><span class="n">container_id</span><span class="si">}</span><span class="s2">): –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    
                    <span class="c1"># –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–π –æ–ø—Ü–∏–∏</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">all_spans</span> <span class="o">=</span> <span class="n">option_container</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s2">&quot;span&quot;</span><span class="p">)</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üîç –ù–∞–π–¥–µ–Ω–æ span —ç–ª–µ–º–µ–Ω—Ç–æ–≤: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_spans</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">span</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_spans</span><span class="p">[:</span><span class="mi">3</span><span class="p">]):</span>
                            <span class="n">span_id</span> <span class="o">=</span> <span class="n">span</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                            <span class="n">span_class</span> <span class="o">=</span> <span class="n">span</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
                            <span class="n">span_text</span> <span class="o">=</span> <span class="n">span</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()[:</span><span class="mi">50</span><span class="p">]</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;        </span><span class="si">{</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. id=&#39;</span><span class="si">{</span><span class="n">span_id</span><span class="si">}</span><span class="s2">&#39; class=&#39;</span><span class="si">{</span><span class="n">span_class</span><span class="si">}</span><span class="s2">&#39; text=&#39;</span><span class="si">{</span><span class="n">span_text</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
                    
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                    <span class="k">continue</span>
                
                <span class="k">if</span> <span class="ow">not</span> <span class="n">category</span><span class="p">:</span>
                    <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–í—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> (id: </span><span class="si">{</span><span class="n">container_id</span><span class="si">}</span><span class="s2">): –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è&quot;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                    <span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è&quot;</span>
                
                <span class="c1"># –ü–∞—Ä—Å–∏–º –∫–æ–¥ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è</span>
                <span class="n">code</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">parse_option_code_title</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
                
                <span class="c1"># –í—Å–µ –æ–ø—Ü–∏–∏ –≤ —ç—Ç–æ–π –∑–æ–Ω–µ –≤—ã–±—Ä–∞–Ω—ã</span>
                <span class="n">option_data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>  <span class="c1"># –¢–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
                    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span>  <span class="c1"># –ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ</span>
                    <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># –í—Å–µ –æ–ø—Ü–∏–∏ –≤ &quot;–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ&quot; –≤—Å–µ–≥–¥–∞ –≤—ã–±—Ä–∞–Ω—ã</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;all_selected_zone&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;original_description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                    <span class="s2">&quot;container_id&quot;</span><span class="p">:</span> <span class="n">container_id</span>
                <span class="p">}</span>
                
                <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">option_data</span><span class="p">)</span>
                
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –í—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> | –ö–∞—Ç–µ–≥–æ—Ä–∏—è: </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–í—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="k">continue</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="si">}</span><span class="s2"> –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">option_containers</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="si">}</span><span class="s2"> –∏–∑ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">option_containers</span><span class="p">)</span><span class="si">}</span><span class="s2"> –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        
        <span class="c1"># –ü–æ–¥—Å—á–µ—Ç –æ–ø—Ü–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</span>
        <span class="n">category_counts</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="n">cat</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏&quot;</span><span class="p">)</span>
            <span class="n">category_counts</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">cat</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">category_counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">cat</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå </span><span class="si">{</span><span class="n">error_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">options</span><span class="p">,</span> <span class="n">errors</span></div>



<div class="viewcode-block" id="collect_all_options_extended">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.collect_all_options_extended">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">collect_all_options_extended</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –æ–ø—Ü–∏–π —Å–æ –≤—Å–µ—Ö –∑–æ–Ω —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üéØ –ù–ê–ß–ò–ù–ê–ï–ú –†–ê–°–®–ò–†–ï–ù–ù–´–ô –°–ë–û–† –í–°–ï–• –û–ü–¶–ò–ô&quot;</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="ow">not</span> <span class="n">navigate_to_options</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>
    
    <span class="n">all_zones_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">zones</span> <span class="o">=</span> <span class="n">extract_option_zones</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">zones</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã –∑–æ–Ω—ã –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">zone</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zones</span><span class="p">):</span>
        <span class="c1"># –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –∫ —Ä–∞–∑–Ω—ã–º –∑–æ–Ω–∞–º</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># –ù–µ –¥–µ–ª–∞–µ–º –ø–∞—É–∑—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –∑–æ–Ω–æ–π</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
            
        <span class="n">zone_options</span><span class="p">,</span> <span class="n">zone_errors</span><span class="p">,</span> <span class="n">processing_notes</span> <span class="o">=</span> <span class="n">extract_zone_options_universal</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">zone</span><span class="p">)</span>
        
        <span class="n">zone_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;zone_title&quot;</span><span class="p">:</span> <span class="n">zone</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
            <span class="s2">&quot;zone_id&quot;</span><span class="p">:</span> <span class="n">zone</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
            <span class="s2">&quot;zone_type&quot;</span><span class="p">:</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data_value&quot;</span><span class="p">:</span> <span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data_value&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">zone_options</span><span class="p">,</span>
            <span class="s2">&quot;total_options&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">zone_options</span><span class="p">),</span>
            <span class="s2">&quot;selected_count&quot;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">zone_options</span> <span class="k">if</span> <span class="n">opt</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span><span class="p">]),</span>
            <span class="s2">&quot;errors&quot;</span><span class="p">:</span> <span class="n">zone_errors</span><span class="p">,</span>
            <span class="s2">&quot;error_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">zone_errors</span><span class="p">),</span>
            <span class="s2">&quot;processing_notes&quot;</span><span class="p">:</span> <span class="n">processing_notes</span><span class="p">,</span>
            <span class="s2">&quot;processing_status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span> <span class="k">if</span> <span class="n">zone_options</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">zone_errors</span> <span class="k">else</span> <span class="s2">&quot;warning&quot;</span> <span class="k">if</span> <span class="n">zone_options</span> <span class="k">else</span> <span class="s2">&quot;error&quot;</span>
        <span class="p">}</span>
        
        <span class="n">all_zones_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zone_data</span><span class="p">)</span>
        
        <span class="n">status_emoji</span> <span class="o">=</span> <span class="s2">&quot;‚úÖ&quot;</span> <span class="k">if</span> <span class="n">zone_data</span><span class="p">[</span><span class="s2">&quot;processing_status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;success&quot;</span> <span class="k">else</span> <span class="s2">&quot;‚ö†Ô∏è&quot;</span> <span class="k">if</span> <span class="n">zone_data</span><span class="p">[</span><span class="s2">&quot;processing_status&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;warning&quot;</span> <span class="k">else</span> <span class="s2">&quot;‚ùå&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status_emoji</span><span class="si">}</span><span class="s2"> –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">zone_data</span><span class="p">[</span><span class="s1">&#39;selected_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">zone_data</span><span class="p">[</span><span class="s1">&#39;total_options&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="n">zone_data</span><span class="p">[</span><span class="s1">&#39;error_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">processing_notes</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìù </span><span class="si">{</span><span class="n">note</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">zone_errors</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ‚ö†Ô∏è –û—à–∏–±–∫–∏ –≤ –∑–æ–Ω–µ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">zone_errors</span><span class="p">[:</span><span class="mi">3</span><span class="p">]:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;        ‚Ä¢ </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">zone_errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;        ‚Ä¢ ... –∏ –µ—â–µ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">zone_errors</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2"> –æ—à–∏–±–æ–∫&quot;</span><span class="p">)</span>
        
        <span class="c1"># –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–æ–Ω–∞–º–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
    
    <span class="n">total_zones</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_zones_data</span><span class="p">)</span>
    <span class="n">total_options</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">zone</span><span class="p">[</span><span class="s2">&quot;total_options&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="n">all_zones_data</span><span class="p">)</span>
    <span class="n">total_selected</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">zone</span><span class="p">[</span><span class="s2">&quot;selected_count&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="n">all_zones_data</span><span class="p">)</span>
    <span class="n">total_errors</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="n">all_zones_data</span><span class="p">)</span>
    
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –†–ê–°–®–ò–†–ï–ù–ù–´–ô –°–ë–û–† –û–ü–¶–ò–ô –ó–ê–í–ï–†–®–ï–ù:&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìä –ó–æ–Ω: </span><span class="si">{</span><span class="n">total_zones</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    üìã –û–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">total_selected</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total_options</span><span class="si">}</span><span class="s2"> –≤—ã–±—Ä–∞–Ω–æ&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ‚ö†Ô∏è –û—à–∏–±–æ–∫: </span><span class="si">{</span><span class="n">total_errors</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">all_zones_data</span></div>



<div class="viewcode-block" id="collect_all_options">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.collect_all_options">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">collect_all_options</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –æ–ø—Ü–∏–∏ —Å–æ –≤—Å–µ—Ö –∑–æ–Ω (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üéØ –ù–ê–ß–ò–ù–ê–ï–ú –°–ë–û–† –í–°–ï–• –û–ü–¶–ò–ô&quot;</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="ow">not</span> <span class="n">navigate_to_options</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>
    
    <span class="n">zones</span> <span class="o">=</span> <span class="n">extract_option_zones</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">zones</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã –∑–æ–Ω—ã –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>
    
    <span class="n">all_zones_data</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">zone</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zones</span><span class="p">):</span>
        <span class="c1"># –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –∫ —Ä–∞–∑–Ω—ã–º –∑–æ–Ω–∞–º</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># –ù–µ –¥–µ–ª–∞–µ–º –ø–∞—É–∑—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –∑–æ–Ω–æ–π</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
            
        <span class="n">zone_options</span><span class="p">,</span> <span class="n">zone_errors</span><span class="p">,</span> <span class="n">processing_notes</span> <span class="o">=</span> <span class="n">extract_zone_options_universal</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">zone</span><span class="p">)</span>
        
        <span class="n">zone_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;zone_title&quot;</span><span class="p">:</span> <span class="n">zone</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
            <span class="s2">&quot;zone_id&quot;</span><span class="p">:</span> <span class="n">zone</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span>
            <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">zone_options</span><span class="p">,</span>
            <span class="s2">&quot;total_options&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">zone_options</span><span class="p">),</span>
            <span class="s2">&quot;selected_count&quot;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">zone_options</span> <span class="k">if</span> <span class="n">opt</span><span class="p">[</span><span class="s2">&quot;selected&quot;</span><span class="p">])</span>
        <span class="p">}</span>
        
        <span class="n">all_zones_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zone_data</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üìä –ó–æ–Ω–∞ &#39;</span><span class="si">{</span><span class="n">zone</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">zone_data</span><span class="p">[</span><span class="s1">&#39;selected_count&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">zone_data</span><span class="p">[</span><span class="s1">&#39;total_options&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π –≤—ã–±—Ä–∞–Ω–æ&quot;</span><span class="p">)</span>
        
        <span class="c1"># –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–æ–Ω–∞–º–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
    
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üéØ –°–ë–û–† –û–ü–¶–ò–ô –ó–ê–í–ï–†–®–ï–ù: –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_zones_data</span><span class="p">)</span><span class="si">}</span><span class="s2"> –∑–æ–Ω&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">all_zones_data</span></div>



<div class="viewcode-block" id="process_vehicle_options">
<a class="viewcode-back" href="../../../modules/parser.html#core.parser.option_processor.process_vehicle_options">[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">process_vehicle_options</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">claim_number</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">vin</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø—Ü–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;üöó –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ–ø—Ü–∏–π –¥–ª—è –¥–µ–ª–∞ </span><span class="si">{</span><span class="n">claim_number</span><span class="si">}</span><span class="s2">, VIN </span><span class="si">{</span><span class="n">vin</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">options_data</span> <span class="o">=</span> <span class="n">collect_all_options_extended</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">options_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–π&quot;</span><span class="p">,</span>
                <span class="s2">&quot;zones&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>
        
        <span class="n">total_zones</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">options_data</span><span class="p">)</span>
        <span class="n">total_options</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">zone</span><span class="p">[</span><span class="s2">&quot;total_options&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="n">options_data</span><span class="p">)</span>
        <span class="n">total_selected</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">zone</span><span class="p">[</span><span class="s2">&quot;selected_count&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="n">options_data</span><span class="p">)</span>
        <span class="n">total_errors</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error_count&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="n">options_data</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;claim_number&quot;</span><span class="p">:</span> <span class="n">claim_number</span><span class="p">,</span>
            <span class="s2">&quot;vin&quot;</span><span class="p">:</span> <span class="n">vin</span><span class="p">,</span>
            <span class="s2">&quot;zones&quot;</span><span class="p">:</span> <span class="n">options_data</span><span class="p">,</span>
            <span class="s2">&quot;statistics&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;total_zones&quot;</span><span class="p">:</span> <span class="n">total_zones</span><span class="p">,</span>
                <span class="s2">&quot;total_options&quot;</span><span class="p">:</span> <span class="n">total_options</span><span class="p">,</span>
                <span class="s2">&quot;total_selected&quot;</span><span class="p">:</span> <span class="n">total_selected</span><span class="p">,</span>
                <span class="s2">&quot;total_errors&quot;</span><span class="p">:</span> <span class="n">total_errors</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –û–ë–†–ê–ë–û–¢–ö–ê –û–ü–¶–ò–ô –ó–ê–í–ï–†–®–ï–ù–ê: </span><span class="si">{</span><span class="n">total_selected</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total_options</span><span class="si">}</span><span class="s2"> –æ–ø—Ü–∏–π –≤—ã–±—Ä–∞–Ω–æ –≤ </span><span class="si">{</span><span class="n">total_zones</span><span class="si">}</span><span class="s2"> –∑–æ–Ω–∞—Ö, –æ—à–∏–±–æ–∫: </span><span class="si">{</span><span class="n">total_errors</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
        
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ–ø—Ü–∏–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;zones&quot;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">driver</span><span class="o">.</span><span class="n">switch_to</span><span class="o">.</span><span class="n">default_content</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;üîÑ –í–æ–∑–≤—Ä–∞—â–µ–Ω—ã –∫ –≥–ª–∞–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ –æ–ø—Ü–∏–π&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">switch_error</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –≥–ª–∞–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É: </span><span class="si">{</span><span class="n">switch_error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> </div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; –ê–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞ 2024. </p>
  </div>

  –°–æ–±—Ä–∞–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ <a href="https://www.sphinx-doc.org/">Sphinx</a> —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">—Ç–µ–º—ã,</a>
    –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>